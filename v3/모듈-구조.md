# 모듈 구조 및 역할

## 1. 모듈 구성
- `v3/`: v3 버전의 모듈 디렉토리
- `bmarketapi/`: Bmarket API 모듈
  - Controller, Service, Repository, DTO 등 API 관련 코드 포함
- `storage/`: 스토리지 모듈
  - Entity, Repository, Base Entity, JPA Auditing 등 스토리지 관련 코드 포함

---

## 2. 모듈 역할
### bmarketapi 모듈
- **Controller**: HTTP 요청을 처리하고 응답을 반환하는 역할
- **Service**: 비즈니스 로직을 처리하는 역할
- **Repository**: 데이터베이스와의 상호작용을 담당하는 역할 (storage 모듈의 Repository를 상속 받아 사용)
- **DTO**: 데이터 전송 객체로, API 요청 및 응답에 사용되는 데이터 구조


### storage 모듈
- **Entity**: 데이터베이스 테이블과 매핑되는 클래스
- **Repository**: Entity와 데이터베이스 간의 CRUD 작업을 수행하는 인터페이스
- **Base Entity**: 공통 필드(예: 생성일, 수정일 등)를 포함하는 기본 엔티티 클래스
- **JPA Auditing**: 엔티티의 생성 및 수정 시간을 자동으로 관리하는 기능
- **Configuration**: JPA 및 데이터베이스 관련 설정을 포함하는 클래스


---

## 3. 모듈 간 의존성
- `bmarketapi` 모듈은 `storage` 모듈에 의존
  -  Repository는 `storage` 모듈의 Repository를 상속받아 사용
  -  Service는 `storage` 모듈의 Entity를 사용하여 비즈니스 로직을 처리
  -  Controller는 `bmarketapi` 모듈의 Service를 호출하여 HTTP 요청을 처리
  -  DTO는 `storage` 모듈의 Entity를 기반으로 생성되어 API 요청 및 응답에 사용됨
  

- `storage` 모듈은 `bmarketapi` 모듈에 의존하지 않음
  -  독립적으로 데이터베이스와의 상호작용을 처리
  -  Entity와 Repository는 `bmarketapi` 모듈에서 사용되지만, `storage` 모듈 자체는 `bmarketapi` 모듈에 의존하지 않음
  -  JPA 및 데이터베이스 관련 설정을 포함하여, 다른 모듈에서도 재사용 가능하도록 설계됨
  -  JPA Auditing 기능을 통해 엔티티의 생성 및 수정 시간을 자동으로 관리함으로써, 데이터베이스와의 상호작용을 효율적으로 처리함
  -  Base Entity는 공통 필드를 포함하여, 코드 중복을 줄이고 유지보수를 용이하게 함
  -  Repository는 JPA를 사용하여 데이터베이스와의 CRUD 작업을 수행하며, `bmarketapi` 모듈에서 상속받아 사용됨
  -  Entity는 데이터베이스 테이블과 매핑되어, 데이터베이스와의 상호작용을 효율적으로 처리함

---

## 4. 모듈 구조 예시 (도메인 기반 디렉토리 구조)
```
bmarketapi/
└── user/
    ├── UserController.java
    ├── UserService.java
    ├── UserDto.java
    ├── UserCommandService.java (선택)
    └── UserRepository.java (storage 모듈의 Repository 상속)

storage/
└── user/
    ├── UserEntity.java
    ├── UserRepository.java
    ├── BaseEntity.java
    └── JpaAuditingConfig.java
```
---

## 5. 모듈 구조의 장점
- **모듈화**: 각 모듈이 독립적으로 개발 및 유지보수 가능
- **재사용성**: 공통 기능을 `storage` 모듈에서 관리하여 다른 모듈에서도 재사용 가능
- **유지보수 용이성**: 각 모듈의 역할이 명확하여 코드 변경 시 영향을 받는 범위를 최소화
- **확장성**: 새로운 기능 추가 시 기존 모듈에 영향을 주지 않고 새로운 모듈을 추가하여 확장 가능
- **테스트 용이성**: 각 모듈을 독립적으로 테스트할 수 있어, 버그 수정 및 기능 추가 시 테스트가 용이함
- **의존성 관리**: 모듈 간 의존성을 명확히 하여, 코드의 가독성과 유지보수성을 향상시킴
