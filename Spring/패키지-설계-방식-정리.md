# 패키지 설계 방식 정리

## 패키지란?
- 패키지는 관련된 클래스와 인터페이스를 그룹화하여 관리하는 단위
- 패키지를 사용하면 코드의 구조를 명확하게 하고, 네임스페이스 충돌을 방지할 수 있음
- 패키지는 디렉토리 구조로 표현되며, 클래스 파일은 해당 패키지의 디렉토리에 위치함


## 1. Package by Layer
- 계층별로 패키지를 구성하는 방식
- 각 계층(예: 컨트롤러, 서비스, 레포지토리 등)을 별도의 패키지로 나누어 관리
### 1-1. 예시 :
```
com.example.project
├── controller
├── service
├── repository
├── dto
└── entity
```

### 1-2. 장점

- 각 계층의 역할이 명확하게 구분되어 유지보수가 용이함
- 각 계층의 변경이 다른 계층에 미치는 영향을 최소화할 수 있음
- 각 계층의 테스트가 용이함
- 의존성 관리가 용이함
- 각 계층의 책임이 명확하게 분리되어 코드의 가독성이 향상됨

### 1-3. 단점
- 패키지 구조가 복잡해질 수 있음
- 작은 프로젝트에서는 과도한 구조화가 오히려 복잡성을 증가시킬 수 있음
- 각 계층 간의 의존성이 명확하게 정의되지 않으면, 의존성 순환 문제가 발생할 수 있음
- 각 계층의 변경이 다른 계층에 영향을 미칠 수 있음
- 각 계층의 책임이 명확하게 분리되지 않으면, 코드의 가독성이 저하될 수 있음


## 2. Package by Domain
- 도메인(기능)별로 패키지를 구성하는 방식
- 각 도메인(예: 사용자, 게시글 등)을 별도의 패키지로 나누어 관리
- 도메인별로 관련된 클래스와 인터페이스를 모아 관리함으로써, 도메인 간의 의존성을 최소화하고, 각 도메인의 책임을 명확하게 분리함

### 2-1. 예시 :
```
com.example.project
├── user
│   ├── UserController
│   ├── UserService
│   ├── UserRepository
│   └── dto
├── post
│   ├── PostController
│   ├── PostService
│   ├── PostRepository
│   └── dto
```

### 2-2. 장점
- 각 도메인의 책임이 명확하게 분리되어 유지보수가 용이함
- 도메인 간의 의존성이 최소화되어 코드의 가독성이 향상됨
- 도메인별로 관련된 클래스와 인터페이스를 모아 관리함으로써, 도메인 간의 변경이 다른 도메인에 미치는 영향을 최소화할 수 있음
- 도메인별로 테스트가 용이함

### 2-3. 단점
- 패키지 구조가 복잡해질 수 있음
- 작은 프로젝트에서는 과도한 구조화가 오히려 복잡성을 증가시킬 수 있음
- 각 도메인 간의 의존성이 명확하게 정의되지 않으면, 의존성 순환 문제가 발생할 수 있음
- 각 도메인의 변경이 다른 도메인에 영향을 미칠 수 있음


## 3. Package by feature
- 기능별로 패키지를 구성하는 방식
- 각 기능(예: 사용자 관리, 게시글 관리 등)을 별도의 패키지로 나누어 관리
- 기능별로 관련된 클래스와 인터페이스를 모아 관리함으로써, 기능 간의 의존성을 최소화하고, 각 기능의 책임을 명확하게 분리함
- 기능별로 패키지를 구성함으로써, 각 기능의 변경이 다른 기능에 미치는 영향을 최소화할 수 있음


### 3. 예시 :
```
com.example.project
├── registerUser
│   ├── RegisterUserController
│   ├── RegisterUserService
│   └── RegisterUserRequest
├── getPostList
│   ├── GetPostListController
│   ├── GetPostListService
│   └── GetPostListResponse
```

### 3-1. 장점
- 각 기능의 책임이 명확하게 분리되어 유지보수가 용이함
- 기능 간의 의존성이 최소화되어 코드의 가독성이 향상됨
- 기능별로 관련된 클래스와 인터페이스를 모아 관리함으로써, 기능 간의 변경이 다른 기능에 미치는 영향을 최소화할 수 있음
- 기능별로 테스트가 용이함

### 3-2. 단점
- 패키지 구조가 복잡해질 수 있음
- 작은 프로젝트에서는 과도한 구조화가 오히려 복잡성을 증가시킬 수 있음
- 각 기능 간의 의존성이 명확하게 정의되지 않으면, 의존성 순환 문제가 발생할 수 있음
- 각 기능의 변경이 다른 기능에 영향을 미칠 수 있음
- 각 기능의 책임이 명확하게 분리되지 않으면, 코드의 가독성이 저하될 수 있음


## 4. Package by Layer + Domain
- 계층별로 패키지를 구성하면서, 각 도메인(기능)별로 하위 패키지를 구성하는 방식
- 각 계층(예: 컨트롤러, 서비스, 레포지토리 등)을 별도의 패키지로 나누고, 각 계층 내에서 도메인별로 하위 패키지를 구성
- 각 계층의 책임을 명확하게 분리하면서, 도메인 간의 의존성을 최소화할 수 있음
- 각 계층의 변경이 다른 계층에 미치는 영향을 최소화할 수 있음

### 4-1. 예시 :
```com.example.project
├── controller
│   ├── user
│   │   ├── UserController
│   ├── post
│   │   ├── PostController
├── service
│   ├── user
│   │   ├── UserService
│   ├── post
│   │   ├── PostService
├── repository
│   ├── user
│   │   ├── UserRepository
│   ├── post
│   │   ├── PostRepository
├── dto
│   ├── user
│   │   ├── UserRequest
│   ├── post
│   │   ├── PostResponse
└── entity
    ├── user
    │   ├── User
    ├── post
        ├── Post
```

### 4-2. 장점
- 각 계층의 책임이 명확하게 분리되어 유지보수가 용이함
- 각 도메인의 책임이 명확하게 분리되어 유지보수가 용이함
- 각 계층과 도메인 간의 의존성이 최소화되어 코드의 가독성이 향상됨
- 각 계층과 도메인별로 관련된 클래스와 인터페이스를 모아 관리함으로써, 변경이 다른 계층이나 도메인에 미치는 영향을 최소화할 수 있음

### 4-3. 단점
- 패키지 구조가 복잡해질 수 있음
- 작은 프로젝트에서는 과도한 구조화가 오히려 복잡성을 증가시킬 수 있음
- 각 계층과 도메인 간의 의존성이 명확하게 정의되지 않으면, 의존성 순환 문제가 발생할 수 있음
- 각 계층과 도메인의 변경이 다른 계층이나 도메인에 영향을 미칠 수 있음
- 각 계층과 도메인의 책임이 명확하게 분리되지 않으면, 코드의 가독성이 저하될 수 있음

## 5. 패키지 설계 시 고려사항
- 패키지 구조는 프로젝트의 규모와 복잡성에 따라 달라질 수 있음
- 패키지 구조는 팀의 개발 스타일과 선호도에 따라 달라질 수 있음
- 패키지 구조는 코드의 가독성과 유지보수성을 고려하여 설계해야 함
- 패키지 구조는 의존성 관리와 테스트 용이성을 고려하여 설계해야 함
- 패키지 구조는 변경이 용이하도록 유연하게 설계해야 함


## 6. 비교
| 패키지 설계 방식                 | 장점 | 단점 |
|---------------------------|-|------|
| Package by Layer          | 각 계층의 책임이 명확하게 분리되어 유지보수가 용이함 | 패키지 구조가 복잡해질 수 있음 |
| Package by Domain         | 각 도메인의 책임이 명확하게 분리되어 유지보수가 용이함 | 패키지 구조가 복잡해질 수 있음 |
| Package by Feature        | 각 기능의 책임이 명확하게 분리되어 유지보수가 용이함 | 패키지 구조가 복잡해질 수 있음 |
| Package by Layer + Domain | 각 계층과 도메인의 책임이 명확하게 분리되어 유지보수가 용이함 | 패키지 구조가 복잡해질 수 있음 |


## 7. 결론
- 규모 작고 단기 프로젝트 → **Layer 기반**
- 규모 크고 장기 프로젝트 → **Domain 기반**
- 규모 크고 장기 프로젝트에서 도메인 간의 의존성이 적은 경우 → **Feature 기반**
- 규모 크고 장기 프로젝트에서 도메인 간의 의존성이 있는 경우 → **Layer + Domain 기반**
